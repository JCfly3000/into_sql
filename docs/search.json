[
  {
    "objectID": "code.html",
    "href": "code.html",
    "title": "chattr LLM pacakge for Rstudio",
    "section": "",
    "text": "1 install package\n\n\nCode\npak::pak(\"mlverse/chattr\")\n\n\n\n\n2 Load package\n\n\nCode\nlibrary(chattr)\n\n\n\n\n3 Use package\n\n\nCode\n#copilot do not need OpenAI_API_KEY\nmy_chat &lt;- ellmer::chat_github(model = \"gpt-4o\")\nchattr_use(my_chat)\n\n\n\n\n4 using LLM as app\n\n\nCode\n#chattr_app()\n\n\n\n\n5 using LLM on code\n\n\nCode\nchattr(\"what is your name?\")\n\n\n# I do not have a name, but you can call me 'Tidy R Assistant'.\n\n\n\n\nCode\nchattr_history=ch_history()\nprint(chattr_history)\n\n\n\n\n6 save history\n\n\nCode\nchat_file &lt;- tempfile()\nsaveRDS(ch_history(), \"chat_history.rds\")\n\n\n\n\n7 clear history\n\n\nCode\nprint(ch_history(list()))\n\n\n\n\n8 Re-load history\n\n\nCode\nchattr_history=ch_history(readRDS(\"chat_history.rds\"))\nprint(chattr_history)\n\n\n\n\n9 reference\nhttps://mlverse.github.io/chattr/\nhttps://github.com/mlverse/chattr"
  },
  {
    "objectID": "code.html#create-or-replace",
    "href": "code.html#create-or-replace",
    "title": "Code",
    "section": "10.1 CREATE OR REPLACE",
    "text": "10.1 CREATE OR REPLACE\nallows a new table to be created or for an existing table to be overwritten by the new table. This is shorthand for dropping the existing table and then creating the new one.\n\n\nCode\nCREATE OR REPLACE temp table mtcars_table_group as\nSELECT model_name, sum(mpg) as total_mpg,mean(cyl) as cyl_mean from mtcars_table\ngroup by 1\n;"
  },
  {
    "objectID": "code.html#create-table-if-not-exists",
    "href": "code.html#create-table-if-not-exists",
    "title": "Code",
    "section": "10.2 CREATE TABLE IF NOT EXISTS",
    "text": "10.2 CREATE TABLE IF NOT EXISTS\nwill only proceed with the creation of the table if it does not already exist. If the table already exists, no action will be taken and the existing table will remain in the database.\n\n\nCode\nCREATE TABLE IF NOT EXISTS  new_mtcars_table_group as\nSELECT model_name, sum(mpg) as total_mpg,mean(cyl) as cyl_mean from mtcars_table\ngroup by 1\n;"
  },
  {
    "objectID": "code.html#left-join",
    "href": "code.html#left-join",
    "title": "Code",
    "section": "12.1 left join",
    "text": "12.1 left join\n\nsqlRPythonPython siuba\n\n\n\n\nCode\nSELECT t1.model_name,t1.mpg ,t1.cyl,t2.* from mtcars_table t1 \nleft join mtcars_table_group t2 on t1.model_name = t2.model_name\nlimit 5\n;\n\n\n\n5 records\n\n\nmodel_name\nmpg\ncyl\nmodel_name\ntotal_mpg\ncyl_mean\n\n\n\n\nMazda RX4\n21.0\n6\nMazda RX4\n21.0\n6\n\n\nMazda RX4 Wag\n21.0\n6\nMazda RX4 Wag\n21.0\n6\n\n\nDatsun 710\n22.8\n4\nDatsun 710\n22.8\n4\n\n\nHornet 4 Drive\n21.4\n6\nHornet 4 Drive\n21.4\n6\n\n\nHornet Sportabout\n18.7\n8\nHornet Sportabout\n18.7\n8\n\n\n\n\n\n\n\n\n\nCode\nmtcars |&gt; left_join(mtcars, by = join_by(model_name == model_name)) |&gt; head(5)\n\n\n         model_name mpg.x cyl.x disp.x hp.x drat.x  wt.x qsec.x vs.x am.x\n1         Mazda RX4  21.0     6    160  110   3.90 2.620  16.46    0    1\n2     Mazda RX4 Wag  21.0     6    160  110   3.90 2.875  17.02    0    1\n3        Datsun 710  22.8     4    108   93   3.85 2.320  18.61    1    1\n4    Hornet 4 Drive  21.4     6    258  110   3.08 3.215  19.44    1    0\n5 Hornet Sportabout  18.7     8    360  175   3.15 3.440  17.02    0    0\n  gear.x carb.x mpg.y cyl.y disp.y hp.y drat.y  wt.y qsec.y vs.y am.y gear.y\n1      4      4  21.0     6    160  110   3.90 2.620  16.46    0    1      4\n2      4      4  21.0     6    160  110   3.90 2.875  17.02    0    1      4\n3      4      1  22.8     4    108   93   3.85 2.320  18.61    1    1      4\n4      3      1  21.4     6    258  110   3.08 3.215  19.44    1    0      3\n5      3      2  18.7     8    360  175   3.15 3.440  17.02    0    0      3\n  carb.y\n1      4\n2      4\n3      1\n4      1\n5      2\n\n\n\n\n\n\nCode\npd.merge(mtcars, mtcars, left_on='model_name', right_on='model_name', how='left').head(5)\n\n\n          model_name  mpg_x  cyl_x  disp_x  ...  am_y  gear_y  carb_y  new_mpg_y\n0          Mazda RX4   21.0    6.0   160.0  ...   1.0     4.0     4.0       22.0\n1      Mazda RX4 Wag   21.0    6.0   160.0  ...   1.0     4.0     4.0       22.0\n2         Datsun 710   22.8    4.0   108.0  ...   1.0     4.0     1.0       23.8\n3     Hornet 4 Drive   21.4    6.0   258.0  ...   0.0     3.0     1.0       22.4\n4  Hornet Sportabout   18.7    8.0   360.0  ...   0.0     3.0     2.0       19.7\n\n[5 rows x 25 columns]\n\n\n\n\n\n\nCode\nmtcars &gt;&gt; left_join(_,mtcars, on = {\"model_name\": \"model_name\"}) &gt;&gt; head(5)\n\n\n          model_name  mpg_x  cyl_x  disp_x  ...  am_y  gear_y  carb_y  new_mpg_y\n0          Mazda RX4   21.0    6.0   160.0  ...   1.0     4.0     4.0       22.0\n1      Mazda RX4 Wag   21.0    6.0   160.0  ...   1.0     4.0     4.0       22.0\n2         Datsun 710   22.8    4.0   108.0  ...   1.0     4.0     1.0       23.8\n3     Hornet 4 Drive   21.4    6.0   258.0  ...   0.0     3.0     1.0       22.4\n4  Hornet Sportabout   18.7    8.0   360.0  ...   0.0     3.0     2.0       19.7\n\n[5 rows x 25 columns]"
  },
  {
    "objectID": "code.html#right-join",
    "href": "code.html#right-join",
    "title": "Code",
    "section": "right join",
    "text": "right join"
  },
  {
    "objectID": "code.html#inter-join",
    "href": "code.html#inter-join",
    "title": "Code",
    "section": "12.2 inter join",
    "text": "12.2 inter join\n\nsqlRPythonPython siuba\n\n\n\n\nCode\nSELECT t1.model_name,t1.mpg ,t1.cyl,t2.* from mtcars_table t1 \ninner join (select * from mtcars_table_group limit 5) t2 on t1.model_name = t2.model_name\n;\n\n\n\n5 records\n\n\nmodel_name\nmpg\ncyl\nmodel_name\ntotal_mpg\ncyl_mean\n\n\n\n\nMazda RX4 Wag\n21.0\n6\nMazda RX4 Wag\n21.0\n6\n\n\nHornet 4 Drive\n21.4\n6\nHornet 4 Drive\n21.4\n6\n\n\nHornet Sportabout\n18.7\n8\nHornet Sportabout\n18.7\n8\n\n\nDuster 360\n14.3\n8\nDuster 360\n14.3\n8\n\n\nMerc 280\n19.2\n6\nMerc 280\n19.2\n6\n\n\n\n\n\n\n\n\n\nCode\nmtcars |&gt; inner_join(mtcars, by = join_by(model_name == model_name)) |&gt; head(5)\n\n\n         model_name mpg.x cyl.x disp.x hp.x drat.x  wt.x qsec.x vs.x am.x\n1         Mazda RX4  21.0     6    160  110   3.90 2.620  16.46    0    1\n2     Mazda RX4 Wag  21.0     6    160  110   3.90 2.875  17.02    0    1\n3        Datsun 710  22.8     4    108   93   3.85 2.320  18.61    1    1\n4    Hornet 4 Drive  21.4     6    258  110   3.08 3.215  19.44    1    0\n5 Hornet Sportabout  18.7     8    360  175   3.15 3.440  17.02    0    0\n  gear.x carb.x mpg.y cyl.y disp.y hp.y drat.y  wt.y qsec.y vs.y am.y gear.y\n1      4      4  21.0     6    160  110   3.90 2.620  16.46    0    1      4\n2      4      4  21.0     6    160  110   3.90 2.875  17.02    0    1      4\n3      4      1  22.8     4    108   93   3.85 2.320  18.61    1    1      4\n4      3      1  21.4     6    258  110   3.08 3.215  19.44    1    0      3\n5      3      2  18.7     8    360  175   3.15 3.440  17.02    0    0      3\n  carb.y\n1      4\n2      4\n3      1\n4      1\n5      2\n\n\n\n\n\n\nCode\npd.merge(mtcars, mtcars, left_on='model_name', right_on='model_name', how='inner').head(5)\n\n\n          model_name  mpg_x  cyl_x  disp_x  ...  am_y  gear_y  carb_y  new_mpg_y\n0          Mazda RX4   21.0    6.0   160.0  ...   1.0     4.0     4.0       22.0\n1      Mazda RX4 Wag   21.0    6.0   160.0  ...   1.0     4.0     4.0       22.0\n2         Datsun 710   22.8    4.0   108.0  ...   1.0     4.0     1.0       23.8\n3     Hornet 4 Drive   21.4    6.0   258.0  ...   0.0     3.0     1.0       22.4\n4  Hornet Sportabout   18.7    8.0   360.0  ...   0.0     3.0     2.0       19.7\n\n[5 rows x 25 columns]\n\n\n\n\n\n\nCode\nmtcars &gt;&gt; inner_join(_,mtcars, on = {\"model_name\": \"model_name\"}) &gt;&gt; head(5)\n\n\n          model_name  mpg_x  cyl_x  disp_x  ...  am_y  gear_y  carb_y  new_mpg_y\n0          Mazda RX4   21.0    6.0   160.0  ...   1.0     4.0     4.0       22.0\n1      Mazda RX4 Wag   21.0    6.0   160.0  ...   1.0     4.0     4.0       22.0\n2         Datsun 710   22.8    4.0   108.0  ...   1.0     4.0     1.0       23.8\n3     Hornet 4 Drive   21.4    6.0   258.0  ...   0.0     3.0     1.0       22.4\n4  Hornet Sportabout   18.7    8.0   360.0  ...   0.0     3.0     2.0       19.7\n\n[5 rows x 25 columns]"
  },
  {
    "objectID": "code.html#select-top-6-and-rename",
    "href": "code.html#select-top-6-and-rename",
    "title": "Code",
    "section": "4.1 select top 6 and rename",
    "text": "4.1 select top 6 and rename\n\nsqlRPythonPython siuba\n\n\n\n\nCode\nSELECT model_name as model,mpg,cyl from mtcars_table limit 6 ;\n\n\n\n6 records\n\n\nmodel\nmpg\ncyl\n\n\n\n\nMazda RX4\n21.0\n6\n\n\nMazda RX4 Wag\n21.0\n6\n\n\nDatsun 710\n22.8\n4\n\n\nHornet 4 Drive\n21.4\n6\n\n\nHornet Sportabout\n18.7\n8\n\n\nValiant\n18.1\n6\n\n\n\n\n\n\n\n\n\nCode\nhead(mtcars,6) |&gt; select(model=model_name,mpg,cyl)\n\n\n                              model  mpg cyl\nMazda RX4                 Mazda RX4 21.0   6\nMazda RX4 Wag         Mazda RX4 Wag 21.0   6\nDatsun 710               Datsun 710 22.8   4\nHornet 4 Drive       Hornet 4 Drive 21.4   6\nHornet Sportabout Hornet Sportabout 18.7   8\nValiant                     Valiant 18.1   6\n\n\n\n\n\n\nCode\nmtcars.rename(columns={'model_name': 'model'})\n\n\n                               model   mpg  cyl   disp  ...   vs   am  gear  carb\nMazda RX4                  Mazda RX4  21.0  6.0  160.0  ...  0.0  1.0   4.0   4.0\nMazda RX4 Wag          Mazda RX4 Wag  21.0  6.0  160.0  ...  0.0  1.0   4.0   4.0\nDatsun 710                Datsun 710  22.8  4.0  108.0  ...  1.0  1.0   4.0   1.0\nHornet 4 Drive        Hornet 4 Drive  21.4  6.0  258.0  ...  1.0  0.0   3.0   1.0\nHornet Sportabout  Hornet Sportabout  18.7  8.0  360.0  ...  0.0  0.0   3.0   2.0\nValiant                      Valiant  18.1  6.0  225.0  ...  1.0  0.0   3.0   1.0\nDuster 360                Duster 360  14.3  8.0  360.0  ...  0.0  0.0   3.0   4.0\nMerc 240D                  Merc 240D  24.4  4.0  146.7  ...  1.0  0.0   4.0   2.0\nMerc 230                    Merc 230  22.8  4.0  140.8  ...  1.0  0.0   4.0   2.0\nMerc 280                    Merc 280  19.2  6.0  167.6  ...  1.0  0.0   4.0   4.0\n\n[10 rows x 12 columns]\n\n\n\n\n\n\nCode\nfrom siuba import *\nmtcars &gt;&gt; rename(model=_.model_name) &gt;&gt; select(_.model, _.mpg, _.cyl) &gt;&gt; head(6)\n\n\n                               model   mpg  cyl\nMazda RX4                  Mazda RX4  21.0  6.0\nMazda RX4 Wag          Mazda RX4 Wag  21.0  6.0\nDatsun 710                Datsun 710  22.8  4.0\nHornet 4 Drive        Hornet 4 Drive  21.4  6.0\nHornet Sportabout  Hornet Sportabout  18.7  8.0\nValiant                      Valiant  18.1  6.0"
  },
  {
    "objectID": "code.html#select-distinct",
    "href": "code.html#select-distinct",
    "title": "Code",
    "section": "4.2 select distinct",
    "text": "4.2 select distinct\nall distinct record of mpg and cyl\n\nsqlRPythonPython siuba\n\n\n\n\nCode\nSELECT distinct mpg,cyl from mtcars_table;\n\n\n\n8 records\n\n\nmpg\ncyl\n\n\n\n\n19.2\n6\n\n\n22.8\n4\n\n\n18.1\n6\n\n\n14.3\n8\n\n\n18.7\n8\n\n\n21.0\n6\n\n\n21.4\n6\n\n\n24.4\n4\n\n\n\n\n\n\n\n\n\nCode\nmtcars |&gt; distinct(mpg,cyl)\n\n\n                   mpg cyl\nMazda RX4         21.0   6\nDatsun 710        22.8   4\nHornet 4 Drive    21.4   6\nHornet Sportabout 18.7   8\nValiant           18.1   6\nDuster 360        14.3   8\nMerc 240D         24.4   4\nMerc 280          19.2   6\n\n\n\n\n\n\nCode\ndf=mtcars[[\"mpg\", \"cyl\"]]\nprint(df.drop_duplicates())\n\n\n                    mpg  cyl\nMazda RX4          21.0  6.0\nDatsun 710         22.8  4.0\nHornet 4 Drive     21.4  6.0\nHornet Sportabout  18.7  8.0\nValiant            18.1  6.0\nDuster 360         14.3  8.0\nMerc 240D          24.4  4.0\nMerc 280           19.2  6.0\n\n\n\n\n\n\nCode\nmtcars &gt;&gt; distinct(_.mpg, _.cyl)\n\n\n    mpg  cyl\n0  21.0  6.0\n1  22.8  4.0\n2  21.4  6.0\n3  18.7  8.0\n4  18.1  6.0\n5  14.3  8.0\n6  24.4  4.0\n7  19.2  6.0"
  },
  {
    "objectID": "code.html#check-unique",
    "href": "code.html#check-unique",
    "title": "Code",
    "section": "11.1 check unique",
    "text": "11.1 check unique\n\n\nCode\nSELECT count(*),count(distinct model_name) from mtcars_table\n;\n\n\n\n1 records\n\n\ncount_star()\ncount(DISTINCT model_name)\n\n\n\n\n10\n10"
  },
  {
    "objectID": "code.html#append-without-duplicate-elimination-union",
    "href": "code.html#append-without-duplicate-elimination-union",
    "title": "Code",
    "section": "13.1 append without duplicate elimination union",
    "text": "13.1 append without duplicate elimination union\n\nsqlRPython\n\n\n\n\nCode\nSELECT count(*) from mtcars_table\n;\n\n\n\n1 records\n\n\ncount_star()\n\n\n\n\n10\n\n\n\n\n\n\n\nCode\nCREATE temp table double_mtcars_table as\nSELECT * from mtcars_table \nunion all\nSELECT * from mtcars_table \n;\n\n\n\n\nCode\nSELECT count(*) from double_mtcars_table\n;\n\n\n\n1 records\n\n\ncount_star()\n\n\n\n\n20\n\n\n\n\n\n\n\n\n\nCode\nmtcars %&gt;% bind_rows(mtcars)\n\n\n                              model_name  mpg cyl  disp  hp drat    wt  qsec vs\nMazda RX4...1                  Mazda RX4 21.0   6 160.0 110 3.90 2.620 16.46  0\nMazda RX4 Wag...2          Mazda RX4 Wag 21.0   6 160.0 110 3.90 2.875 17.02  0\nDatsun 710...3                Datsun 710 22.8   4 108.0  93 3.85 2.320 18.61  1\nHornet 4 Drive...4        Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1\nHornet Sportabout...5  Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0\nValiant...6                      Valiant 18.1   6 225.0 105 2.76 3.460 20.22  1\nDuster 360...7                Duster 360 14.3   8 360.0 245 3.21 3.570 15.84  0\nMerc 240D...8                  Merc 240D 24.4   4 146.7  62 3.69 3.190 20.00  1\nMerc 230...9                    Merc 230 22.8   4 140.8  95 3.92 3.150 22.90  1\nMerc 280...10                   Merc 280 19.2   6 167.6 123 3.92 3.440 18.30  1\nMazda RX4...11                 Mazda RX4 21.0   6 160.0 110 3.90 2.620 16.46  0\nMazda RX4 Wag...12         Mazda RX4 Wag 21.0   6 160.0 110 3.90 2.875 17.02  0\nDatsun 710...13               Datsun 710 22.8   4 108.0  93 3.85 2.320 18.61  1\nHornet 4 Drive...14       Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1\nHornet Sportabout...15 Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0\nValiant...16                     Valiant 18.1   6 225.0 105 2.76 3.460 20.22  1\nDuster 360...17               Duster 360 14.3   8 360.0 245 3.21 3.570 15.84  0\nMerc 240D...18                 Merc 240D 24.4   4 146.7  62 3.69 3.190 20.00  1\nMerc 230...19                   Merc 230 22.8   4 140.8  95 3.92 3.150 22.90  1\nMerc 280...20                   Merc 280 19.2   6 167.6 123 3.92 3.440 18.30  1\n                       am gear carb\nMazda RX4...1           1    4    4\nMazda RX4 Wag...2       1    4    4\nDatsun 710...3          1    4    1\nHornet 4 Drive...4      0    3    1\nHornet Sportabout...5   0    3    2\nValiant...6             0    3    1\nDuster 360...7          0    3    4\nMerc 240D...8           0    4    2\nMerc 230...9            0    4    2\nMerc 280...10           0    4    4\nMazda RX4...11          1    4    4\nMazda RX4 Wag...12      1    4    4\nDatsun 710...13         1    4    1\nHornet 4 Drive...14     0    3    1\nHornet Sportabout...15  0    3    2\nValiant...16            0    3    1\nDuster 360...17         0    3    4\nMerc 240D...18          0    4    2\nMerc 230...19           0    4    2\nMerc 280...20           0    4    4\n\n\n\n\n\n\nCode\npd.concat([mtcars,mtcars],ignore_index=True)\n\n\n           model_name   mpg  cyl   disp     hp  ...   vs   am  gear  carb  new_mpg\n0           Mazda RX4  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n1       Mazda RX4 Wag  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n2          Datsun 710  22.8  4.0  108.0   93.0  ...  1.0  1.0   4.0   1.0     23.8\n3      Hornet 4 Drive  21.4  6.0  258.0  110.0  ...  1.0  0.0   3.0   1.0     22.4\n4   Hornet Sportabout  18.7  8.0  360.0  175.0  ...  0.0  0.0   3.0   2.0     19.7\n5             Valiant  18.1  6.0  225.0  105.0  ...  1.0  0.0   3.0   1.0     19.1\n6          Duster 360  14.3  8.0  360.0  245.0  ...  0.0  0.0   3.0   4.0     15.3\n7           Merc 240D  24.4  4.0  146.7   62.0  ...  1.0  0.0   4.0   2.0     25.4\n8            Merc 230  22.8  4.0  140.8   95.0  ...  1.0  0.0   4.0   2.0     23.8\n9            Merc 280  19.2  6.0  167.6  123.0  ...  1.0  0.0   4.0   4.0     20.2\n10          Mazda RX4  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n11      Mazda RX4 Wag  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n12         Datsun 710  22.8  4.0  108.0   93.0  ...  1.0  1.0   4.0   1.0     23.8\n13     Hornet 4 Drive  21.4  6.0  258.0  110.0  ...  1.0  0.0   3.0   1.0     22.4\n14  Hornet Sportabout  18.7  8.0  360.0  175.0  ...  0.0  0.0   3.0   2.0     19.7\n15            Valiant  18.1  6.0  225.0  105.0  ...  1.0  0.0   3.0   1.0     19.1\n16         Duster 360  14.3  8.0  360.0  245.0  ...  0.0  0.0   3.0   4.0     15.3\n17          Merc 240D  24.4  4.0  146.7   62.0  ...  1.0  0.0   4.0   2.0     25.4\n18           Merc 230  22.8  4.0  140.8   95.0  ...  1.0  0.0   4.0   2.0     23.8\n19           Merc 280  19.2  6.0  167.6  123.0  ...  1.0  0.0   4.0   4.0     20.2\n\n[20 rows x 13 columns]"
  },
  {
    "objectID": "code.html#append-with-duplicate-elimination-union-all",
    "href": "code.html#append-with-duplicate-elimination-union-all",
    "title": "Code",
    "section": "13.2 append with duplicate elimination union all",
    "text": "13.2 append with duplicate elimination union all\n\nsqlRPython\n\n\n\n\nCode\nCREATE OR REPLACE temp table double_mtcars_table as\nSELECT * from mtcars_table \nunion all\nSELECT * from mtcars_table \n;\n\n\n\n\nCode\nSELECT count(*) from double_mtcars_table\n;\n\n\n\n1 records\n\n\ncount_star()\n\n\n\n\n20\n\n\n\n\n\n\n\nCode\nselect count(*) from (\nSELECT distinct * from double_mtcars_table\n)\n;\n\n\n\n1 records\n\n\ncount_star()\n\n\n\n\n10\n\n\n\n\n\n\n\n\n\nCode\nmtcars %&gt;% bind_rows(mtcars) |&gt; distinct()\n\n\n                         model_name  mpg cyl  disp  hp drat    wt  qsec vs am\nMazda RX4                 Mazda RX4 21.0   6 160.0 110 3.90 2.620 16.46  0  1\nMazda RX4 Wag         Mazda RX4 Wag 21.0   6 160.0 110 3.90 2.875 17.02  0  1\nDatsun 710               Datsun 710 22.8   4 108.0  93 3.85 2.320 18.61  1  1\nHornet 4 Drive       Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0\nHornet Sportabout Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0\nValiant                     Valiant 18.1   6 225.0 105 2.76 3.460 20.22  1  0\nDuster 360               Duster 360 14.3   8 360.0 245 3.21 3.570 15.84  0  0\nMerc 240D                 Merc 240D 24.4   4 146.7  62 3.69 3.190 20.00  1  0\nMerc 230                   Merc 230 22.8   4 140.8  95 3.92 3.150 22.90  1  0\nMerc 280                   Merc 280 19.2   6 167.6 123 3.92 3.440 18.30  1  0\n                  gear carb\nMazda RX4            4    4\nMazda RX4 Wag        4    4\nDatsun 710           4    1\nHornet 4 Drive       3    1\nHornet Sportabout    3    2\nValiant              3    1\nDuster 360           3    4\nMerc 240D            4    2\nMerc 230             4    2\nMerc 280             4    4\n\n\n\n\n\n\nCode\npd.concat([mtcars,mtcars],ignore_index=True).drop_duplicates()\n\n\n          model_name   mpg  cyl   disp     hp  ...   vs   am  gear  carb  new_mpg\n0          Mazda RX4  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n1      Mazda RX4 Wag  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n2         Datsun 710  22.8  4.0  108.0   93.0  ...  1.0  1.0   4.0   1.0     23.8\n3     Hornet 4 Drive  21.4  6.0  258.0  110.0  ...  1.0  0.0   3.0   1.0     22.4\n4  Hornet Sportabout  18.7  8.0  360.0  175.0  ...  0.0  0.0   3.0   2.0     19.7\n5            Valiant  18.1  6.0  225.0  105.0  ...  1.0  0.0   3.0   1.0     19.1\n6         Duster 360  14.3  8.0  360.0  245.0  ...  0.0  0.0   3.0   4.0     15.3\n7          Merc 240D  24.4  4.0  146.7   62.0  ...  1.0  0.0   4.0   2.0     25.4\n8           Merc 230  22.8  4.0  140.8   95.0  ...  1.0  0.0   4.0   2.0     23.8\n9           Merc 280  19.2  6.0  167.6  123.0  ...  1.0  0.0   4.0   4.0     20.2\n\n[10 rows x 13 columns]"
  },
  {
    "objectID": "code.html#pivot-on-one-column",
    "href": "code.html#pivot-on-one-column",
    "title": "Code",
    "section": "17.1 PIVOT on one column",
    "text": "17.1 PIVOT on one column\n\n\nCode\nPIVOT cities\nON year\nUSING sum(population)\nGROUP BY country;\n\n\n\n2 records\n\n\ncountry\n2000\n2010\n2020\n\n\n\n\nNL\n1005\n1065\n1158\n\n\nUS\n8579\n8783\n9510"
  },
  {
    "objectID": "code.html#pivot-on-two-column",
    "href": "code.html#pivot-on-two-column",
    "title": "Code",
    "section": "17.2 PIVOT on two column",
    "text": "17.2 PIVOT on two column\n\n\nCode\nPIVOT cities\nON country, name\nUSING sum(population);\n\n\n\n3 records\n\n\n\n\n\n\n\n\n\n\n\nyear\nNL_Amsterdam\nNL_New York City\nNL_Seattle\nUS_Amsterdam\nUS_New York City\nUS_Seattle\n\n\n\n\n2000\n1005\nNA\nNA\nNA\n8015\n564\n\n\n2010\n1065\nNA\nNA\nNA\n8175\n608\n\n\n2020\n1158\nNA\nNA\nNA\n8772\n738"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "AI handbook",
    "section": "",
    "text": "This is a Quarto website.\n\nIn to R\n\n\nR model\n\n\nIn to Python\n\n\nPyhton model"
  },
  {
    "objectID": "code.html#select-distinct-on",
    "href": "code.html#select-distinct-on",
    "title": "Code",
    "section": "3.3 select distinct on",
    "text": "3.3 select distinct on\nall distinct record of cyl\n\n\nCode\nSELECT distinct on (cyl) mpg ,cyl from mtcars_table;\n\n\n\n3 records\n\n\nmpg\ncyl\n\n\n\n\n21.0\n6\n\n\n22.8\n4\n\n\n18.7\n8"
  },
  {
    "objectID": "code.html#append-without-duplicate-elimination-union-all",
    "href": "code.html#append-without-duplicate-elimination-union-all",
    "title": "Code",
    "section": "13.1 append without duplicate elimination union all",
    "text": "13.1 append without duplicate elimination union all\n\nsqlRPython\n\n\n\n\nCode\nSELECT count(*) from mtcars_table\n;\n\n\n\n1 records\n\n\ncount_star()\n\n\n\n\n10\n\n\n\n\n\n\n\nCode\nCREATE temp table double_mtcars_table as\nSELECT * from mtcars_table \nunion all\nSELECT * from mtcars_table \n;\n\n\n\n\nCode\nSELECT count(*) from double_mtcars_table\n;\n\n\n\n1 records\n\n\ncount_star()\n\n\n\n\n20\n\n\n\n\n\n\n\n\n\nCode\nmtcars %&gt;% bind_rows(mtcars)\n\n\n                              model_name  mpg cyl  disp  hp drat    wt  qsec vs\nMazda RX4...1                  Mazda RX4 21.0   6 160.0 110 3.90 2.620 16.46  0\nMazda RX4 Wag...2          Mazda RX4 Wag 21.0   6 160.0 110 3.90 2.875 17.02  0\nDatsun 710...3                Datsun 710 22.8   4 108.0  93 3.85 2.320 18.61  1\nHornet 4 Drive...4        Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1\nHornet Sportabout...5  Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0\nValiant...6                      Valiant 18.1   6 225.0 105 2.76 3.460 20.22  1\nDuster 360...7                Duster 360 14.3   8 360.0 245 3.21 3.570 15.84  0\nMerc 240D...8                  Merc 240D 24.4   4 146.7  62 3.69 3.190 20.00  1\nMerc 230...9                    Merc 230 22.8   4 140.8  95 3.92 3.150 22.90  1\nMerc 280...10                   Merc 280 19.2   6 167.6 123 3.92 3.440 18.30  1\nMazda RX4...11                 Mazda RX4 21.0   6 160.0 110 3.90 2.620 16.46  0\nMazda RX4 Wag...12         Mazda RX4 Wag 21.0   6 160.0 110 3.90 2.875 17.02  0\nDatsun 710...13               Datsun 710 22.8   4 108.0  93 3.85 2.320 18.61  1\nHornet 4 Drive...14       Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1\nHornet Sportabout...15 Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0\nValiant...16                     Valiant 18.1   6 225.0 105 2.76 3.460 20.22  1\nDuster 360...17               Duster 360 14.3   8 360.0 245 3.21 3.570 15.84  0\nMerc 240D...18                 Merc 240D 24.4   4 146.7  62 3.69 3.190 20.00  1\nMerc 230...19                   Merc 230 22.8   4 140.8  95 3.92 3.150 22.90  1\nMerc 280...20                   Merc 280 19.2   6 167.6 123 3.92 3.440 18.30  1\n                       am gear carb\nMazda RX4...1           1    4    4\nMazda RX4 Wag...2       1    4    4\nDatsun 710...3          1    4    1\nHornet 4 Drive...4      0    3    1\nHornet Sportabout...5   0    3    2\nValiant...6             0    3    1\nDuster 360...7          0    3    4\nMerc 240D...8           0    4    2\nMerc 230...9            0    4    2\nMerc 280...10           0    4    4\nMazda RX4...11          1    4    4\nMazda RX4 Wag...12      1    4    4\nDatsun 710...13         1    4    1\nHornet 4 Drive...14     0    3    1\nHornet Sportabout...15  0    3    2\nValiant...16            0    3    1\nDuster 360...17         0    3    4\nMerc 240D...18          0    4    2\nMerc 230...19           0    4    2\nMerc 280...20           0    4    4\n\n\n\n\n\n\nCode\npd.concat([mtcars,mtcars],ignore_index=True)\n\n\n           model_name   mpg  cyl   disp     hp  ...   vs   am  gear  carb  new_mpg\n0           Mazda RX4  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n1       Mazda RX4 Wag  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n2          Datsun 710  22.8  4.0  108.0   93.0  ...  1.0  1.0   4.0   1.0     23.8\n3      Hornet 4 Drive  21.4  6.0  258.0  110.0  ...  1.0  0.0   3.0   1.0     22.4\n4   Hornet Sportabout  18.7  8.0  360.0  175.0  ...  0.0  0.0   3.0   2.0     19.7\n5             Valiant  18.1  6.0  225.0  105.0  ...  1.0  0.0   3.0   1.0     19.1\n6          Duster 360  14.3  8.0  360.0  245.0  ...  0.0  0.0   3.0   4.0     15.3\n7           Merc 240D  24.4  4.0  146.7   62.0  ...  1.0  0.0   4.0   2.0     25.4\n8            Merc 230  22.8  4.0  140.8   95.0  ...  1.0  0.0   4.0   2.0     23.8\n9            Merc 280  19.2  6.0  167.6  123.0  ...  1.0  0.0   4.0   4.0     20.2\n10          Mazda RX4  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n11      Mazda RX4 Wag  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n12         Datsun 710  22.8  4.0  108.0   93.0  ...  1.0  1.0   4.0   1.0     23.8\n13     Hornet 4 Drive  21.4  6.0  258.0  110.0  ...  1.0  0.0   3.0   1.0     22.4\n14  Hornet Sportabout  18.7  8.0  360.0  175.0  ...  0.0  0.0   3.0   2.0     19.7\n15            Valiant  18.1  6.0  225.0  105.0  ...  1.0  0.0   3.0   1.0     19.1\n16         Duster 360  14.3  8.0  360.0  245.0  ...  0.0  0.0   3.0   4.0     15.3\n17          Merc 240D  24.4  4.0  146.7   62.0  ...  1.0  0.0   4.0   2.0     25.4\n18           Merc 230  22.8  4.0  140.8   95.0  ...  1.0  0.0   4.0   2.0     23.8\n19           Merc 280  19.2  6.0  167.6  123.0  ...  1.0  0.0   4.0   4.0     20.2\n\n[20 rows x 13 columns]"
  },
  {
    "objectID": "code.html#append-with-duplicate-elimination-union",
    "href": "code.html#append-with-duplicate-elimination-union",
    "title": "Code",
    "section": "13.2 append with duplicate elimination union",
    "text": "13.2 append with duplicate elimination union\n\nsqlRPython\n\n\n\n\nCode\nCREATE OR REPLACE temp table double_mtcars_table as\nSELECT * from mtcars_table \nunion\nSELECT * from mtcars_table \n;\n\n\n\n\nCode\nSELECT count(*) from double_mtcars_table\n;\n\n\n\n1 records\n\n\ncount_star()\n\n\n\n\n10\n\n\n\n\n\n\n\nCode\nselect count(*) from (\nSELECT distinct * from double_mtcars_table\n)\n;\n\n\n\n1 records\n\n\ncount_star()\n\n\n\n\n10\n\n\n\n\n\n\n\n\n\nCode\nmtcars %&gt;% bind_rows(mtcars) |&gt; distinct()\n\n\n                         model_name  mpg cyl  disp  hp drat    wt  qsec vs am\nMazda RX4                 Mazda RX4 21.0   6 160.0 110 3.90 2.620 16.46  0  1\nMazda RX4 Wag         Mazda RX4 Wag 21.0   6 160.0 110 3.90 2.875 17.02  0  1\nDatsun 710               Datsun 710 22.8   4 108.0  93 3.85 2.320 18.61  1  1\nHornet 4 Drive       Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0\nHornet Sportabout Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0\nValiant                     Valiant 18.1   6 225.0 105 2.76 3.460 20.22  1  0\nDuster 360               Duster 360 14.3   8 360.0 245 3.21 3.570 15.84  0  0\nMerc 240D                 Merc 240D 24.4   4 146.7  62 3.69 3.190 20.00  1  0\nMerc 230                   Merc 230 22.8   4 140.8  95 3.92 3.150 22.90  1  0\nMerc 280                   Merc 280 19.2   6 167.6 123 3.92 3.440 18.30  1  0\n                  gear carb\nMazda RX4            4    4\nMazda RX4 Wag        4    4\nDatsun 710           4    1\nHornet 4 Drive       3    1\nHornet Sportabout    3    2\nValiant              3    1\nDuster 360           3    4\nMerc 240D            4    2\nMerc 230             4    2\nMerc 280             4    4\n\n\n\n\n\n\nCode\npd.concat([mtcars,mtcars],ignore_index=True).drop_duplicates()\n\n\n          model_name   mpg  cyl   disp     hp  ...   vs   am  gear  carb  new_mpg\n0          Mazda RX4  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n1      Mazda RX4 Wag  21.0  6.0  160.0  110.0  ...  0.0  1.0   4.0   4.0     22.0\n2         Datsun 710  22.8  4.0  108.0   93.0  ...  1.0  1.0   4.0   1.0     23.8\n3     Hornet 4 Drive  21.4  6.0  258.0  110.0  ...  1.0  0.0   3.0   1.0     22.4\n4  Hornet Sportabout  18.7  8.0  360.0  175.0  ...  0.0  0.0   3.0   2.0     19.7\n5            Valiant  18.1  6.0  225.0  105.0  ...  1.0  0.0   3.0   1.0     19.1\n6         Duster 360  14.3  8.0  360.0  245.0  ...  0.0  0.0   3.0   4.0     15.3\n7          Merc 240D  24.4  4.0  146.7   62.0  ...  1.0  0.0   4.0   2.0     25.4\n8           Merc 230  22.8  4.0  140.8   95.0  ...  1.0  0.0   4.0   2.0     23.8\n9           Merc 280  19.2  6.0  167.6  123.0  ...  1.0  0.0   4.0   4.0     20.2\n\n[10 rows x 13 columns]"
  },
  {
    "objectID": "code_cn.html",
    "href": "code_cn.html",
    "title": "SQL handbook",
    "section": "",
    "text": "-no-auto-init code.qmd"
  },
  {
    "objectID": "test.html",
    "href": "test.html",
    "title": "chatlas LLM pacakge for Python",
    "section": "",
    "text": "Code\nimport sys\nprint(sys.version)\nfor path in sys.path:\n  print(path)\n\n\n3.13.2 (v3.13.2:4f8bb3947cf, Feb  4 2025, 11:51:10) [Clang 15.0.0 (clang-1500.3.9.4)]\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python313.zip\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/lib-dynload\n\n/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages"
  },
  {
    "objectID": "ellmer.html",
    "href": "ellmer.html",
    "title": "ellmer LLM pacakge for R",
    "section": "",
    "text": "ellmer makes it easy to use large language models (LLM) from R. It supports a wide variety of LLM providers and implements a rich set of features including streaming outputs, tool/function calling, structured data extraction, and more.\n\n\n\nCode\n#install.packages(\"ellmer\")\n\n\n\n\nCode\nlibrary(ellmer)\nlibrary(keyring)\n\n\n\n1 Google gemini\n\n\nCode\nchat_gemini_model=chat_google_gemini(\n  system_prompt = NULL,\n  base_url = \"https://generativelanguage.googleapis.com/v1beta/\",\n  api_key = key_get(\"google_ai_api_key\"),\n  model = \"gemini-2.0-flash\",\n  api_args = list(),\n  echo = NULL\n)\n\nchat_gemini_model\n\n\n&lt;Chat Google/Gemini/gemini-2.0-flash turns=0 tokens=0/0 $0.00&gt;\n\n\n\n\nCode\nresult=chat_gemini_model$chat(\"Tell me three jokes about statisticians\")\n\n\nAlright, here are three jokes about statisticians:\n\n1.  **Why did the statistician break up with the mathematician?**\n    Because he said their relationship was \"insignificant.\"\n\n2.  **A statistician may not be good at telling jokes.**\n    But the probability that they're funny is always greater than 0.05.\n\n3.  **A statistician can have his head in an oven and his feet in ice, and he \nwill say that on the average he feels fine.**\n\n\nCode\nresult\n\n\n[1] \"Alright, here are three jokes about statisticians:\\n\\n1.  **Why did the statistician break up with the mathematician?**\\n    Because he said their relationship was \\\"insignificant.\\\"\\n\\n2.  **A statistician may not be good at telling jokes.**\\n    But the probability that they're funny is always greater than 0.05.\\n\\n3.  **A statistician can have his head in an oven and his feet in ice, and he will say that on the average he feels fine.**\\n\"\n\n\n\n\n2 Interactive mode\n\n\nCode\n#live_browser(chat_gemini_model)\n\n\n\n\n3 console mode\n\n\nCode\n#live_console(chat_gemini_model)\n\n\n\n\n4 reference\nhttps://ellmer.tidyverse.org/"
  },
  {
    "objectID": "chatlas.html",
    "href": "chatlas.html",
    "title": "chatlas LLM pacakge for Python",
    "section": "",
    "text": "chatlas provides a simple and unified interface across large language model (llm) providers in Python.\n\n#| eval: false\npip3 install -U chatlas\npip3 install -q -U google-genai\npip3 install shiny\npip3 install keyring\n\n\nCode\nfrom chatlas import ChatGoogle,token_usage\nimport keyring\n\n\n\n1 Google gemini\n\n\nCode\nfrom chatlas import ChatGoogle\n\nchat_google_model = ChatGoogle(\n  model = \"gemini-2.0-flash\",\n  api_key=keyring.get_password(\"system\", \"google_ai_api_key\"),\n  system_prompt = \"You are a IT expert\",\n)\n\nchat_google_model\n\n\n&lt;Chat turns=1 tokens=0&gt;\n  &lt;Turn role='system'&gt;\n    &lt;ContentText text='You are a IT expert'&gt;\n\n\n\n\nCode\nresult=chat_google_model.chat(\"What preceding languages most influenced Python?\")\nresult\n\n\n\n\n\n\nPython’s design and features were influenced by a number of preceding languages, drawing inspiration from various paradigms and aiming to balance simplicity with power. Here’s a breakdown of the most significant influences:\n\nABC: This is arguably the single most important influence. Guido van Rossum, Python’s creator, worked on the ABC language at the CWI (Centrum Wiskunde & Informatica) in the Netherlands before starting on Python. ABC was designed as a teaching language meant to be much easier to learn and use than languages like Pascal or BASIC. From ABC, Python inherited:\n\nEmphasis on readability: ABC prioritized code readability, and Python adopted its indentation-based block structure and a clear, expressive syntax.\nHigh-level data structures: ABC had built-in support for features like arbitrary-precision arithmetic and dynamic typing, which Python also embraced.\nSimplicity and ease of use: The goal of making programming accessible was a key driver in Python’s design, directly inspired by ABC.\n\nModula-3: This language, a successor to Pascal and Modula-2, influenced Python in several ways:\n\nModules and modularity: Modula-3 heavily emphasized modular programming, and Python’s module system, with its import mechanism, owes a debt to Modula-3.\nException handling: Python’s try...except exception handling mechanism was inspired by Modula-3’s exception handling.\n\nSmalltalk: This object-oriented language contributed to Python’s:\n\nObject model: Although Python isn’t a purely object-oriented language like Smalltalk, its object model, where everything is an object (including numbers and functions), was influenced by Smalltalk.\nDynamic typing: Smalltalk’s dynamic typing likely reinforced the decision to use dynamic typing in Python.\n\nC: C’s influence is primarily in Python’s implementation:\n\nImplementation language: Python is written in C (the standard implementation is CPython).\nLow-level access: Python provides ways to interface with C code, allowing developers to access lower-level system features and libraries when needed.\nSyntax: Some minor aspects of Python’s syntax and operators are derived from C.\n\nLisp: While not as direct as ABC or Modula-3, Lisp’s concepts influenced Python, particularly in:\n\nFunctional programming: Python supports functional programming paradigms with features like lambda functions, map, filter, and reduce. While not a purely functional language, Python’s embrace of these concepts has roots in languages like Lisp.\nDynamic nature: Lisp’s dynamic nature and ability to manipulate code as data likely contributed to Python’s flexibility.\n\n\nIn summary, ABC was the most significant direct influence, shaping Python’s core philosophy of readability and ease of use. Modula-3 contributed significantly to Python’s module system and exception handling. Smalltalk influenced Python’s object model, and C served as the implementation language. Finally, Lisp contributed to Python’s functional programming capabilities and dynamic features.\n\n\n&lt;chatlas._chat.ChatResponse at 0x11e794c20&gt;\n\n\n\n\n2 Interactive mode\n\n\nCode\n#chat_google_model.app()\n\n\n\n\n3 console mode\n\n\nCode\n#chat_google_model.console()\n\n\n\n\n4 reference\nhttps://ellmer.tidyverse.org/"
  }
]